
import React, { Component } from 'react';
import {ListItem} from 'material-ui/List';

// maybe break out to it's own file at some point
const GraphLink = (props) => {
    return (
      <ListItem primaryText={props.graphName} onClick={props.handleClick.bind(null, props.graphName)} />
    )
};

class GraphList extends Component {

  constructor(props) {
    super(props);
    this.allGraphs = this.props.storage.getAll();

    this.handleClick = this.handleClick.bind(this);
  }

  handleClick(graphName) {
    console.log('GraphList click:', graphName);
    this.props.displayGraph(graphName);
    this.props.storage.updateHistory(graphName);
    event.preventDefault();
  }

  graphList = () => {
    const graphList = Object.keys(this.allGraphs).map((graphName, index) => {
      let idxString = "graphList-" + index;
      return (
        <GraphLink key={idxString} handleClick={this.handleClick} graphName={graphName} />
      )});
    return graphList;
  };

  render() {
    return (
        <div className="GraphList">
          <h3>Graph List</h3>
          {this.graphList()}
        </div>
    );
  }
}


export default GraphList;