
import React, { Component } from 'react';
import {ListItem} from 'material-ui/List';
import {cyan500, cyan100} from 'material-ui/styles/colors';
import ActionDelete from 'material-ui/svg-icons/action/delete';

// maybe break out to it's own file at some point
const GraphLink = (props) => {
    return (
      <ListItem
          primaryText={props.graphName}
          onClick={props.handleClick.bind(null, props.graphName)}
          rightIcon={
            <ActionDelete color={cyan500} hoverColor={cyan100} onClick={() => props.deleteGraph(props.graphName)}/>
          }
      />
    )
};

class GraphList extends Component {

  constructor(props) {
    super(props);
    this.allGraphs = this.props.storage.getAll();

    this.handleClick = this.handleClick.bind(this);
  }

  deleteGraph = (graphName) => {
    if(confirm('Delete Graph?')) {
      this.props.storage.deleteObject(graphName);
    }
  };

  handleClick(graphName) {
    this.props.displayGraph(graphName);
    this.props.storage.updateHistory(graphName);
    event.preventDefault();
  }

  graphList = () => {
    const graphList = Object.keys(this.allGraphs).map((graphName, index) => {
      let idxString = "graphList-" + index;
      return (
        <GraphLink key={idxString} handleClick={this.handleClick} graphName={graphName} deleteGraph={this.deleteGraph} />
      )});
    return graphList;
  };

  render() {
    return (
        <div className="GraphList">
          <h3>Graph List</h3>
          {this.graphList()}
        </div>
    );
  }
}


export default GraphList;