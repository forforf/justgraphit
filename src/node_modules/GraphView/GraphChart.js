
import React, { Component } from 'react';

import EmptyGraph      from './EmptyGraph.js'
import SingleItemGraph from './SingleItemGraph.js'
import LineGraph       from './LineGraph.js'


class GraphChart extends Component {

  constructor(props) {
    super(props);
    this.getLabeledObject = props.getLabeledObject;
    this.state = {
      height: 200,
      width: 300
    }

  }

  componentDidMount() {
    const height = document.getElementsByClassName('GraphChart')[0].clientHeight;
    const width  = document.getElementsByClassName('GraphChart')[0].clientWidth;
    this.setState( { height: height, width: width } );
  }


  graphDataLength(graphData) {
    if (!graphData || !graphData.length) {
      return 0;
    }
    return graphData.length;
  };

  selectGraphElement(graphName, graphData) {
    const len = this.graphDataLength(graphData);

    if (len === 0) return <EmptyGraph/>;
    if (len === 1) return <SingleItemGraph graphName={graphName} itemNumber={graphData[0].number} itemDatetime={graphData[0].datetime} />;
    return <LineGraph
        chartId="jgi-line-graph"
        graphName={graphName}
        graphData={graphData}
        height={this.state.height}
        width={this.state.width}
    />
  };
  
  render() {
    const graphObj = this.props.currentGraphObj;
    const labeledObj = this.getLabeledObject(graphObj);
    return (
        <div className="GraphChart">
          {this.selectGraphElement(labeledObj.name, labeledObj.data)}
        </div>
    );
  }
}

export default GraphChart;
